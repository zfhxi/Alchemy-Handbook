(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{302:function(t,n,s){"use strict";s.r(n);var i=s(10),e=Object(i.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"多设备实时同步工具syncthing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多设备实时同步工具syncthing"}},[t._v("#")]),t._v(" 多设备实时同步工具syncthing")]),t._v(" "),n("blockquote",[n("p",[t._v("Syncthing 是一个开源免费的数据同步神器，被称为 Resilio Sync 的替代品，支持 Android、Linux、Windows、Mac OS X 等系统，可以使我们在 2 台任何系统任何设备之间，实现文件实时同步，很强大。而且数据很安全，不会存储在你的设备以外的其他地方。所有通信都使用 TLS 进行保护。所使用的加密包括完美的前向保密，以防止窃听者获得对您的数据的访问权限。很适合我们用来搭建私有同步网盘。")])]),t._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),n("h3",{attrs:{id:"linux平台上安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux平台上安装"}},[t._v("#")]),t._v(" Linux平台上安装")]),t._v(" "),n("p",[n("strong",[t._v("下载安装")])]),t._v(" "),n("blockquote",[n("p",[t._v("注：建议通过which syncthing命令查看服务器是否安装了，避免重复安装。")])]),t._v(" "),n("p",[t._v("在"),n("a",{attrs:{href:"https://github.com/syncthing/syncthing/releases/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/syncthing/syncthing/releases/"),n("OutboundLink")],1),t._v(" 找linux amd64版，如"),n("a",{attrs:{href:"https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz"),n("OutboundLink")],1),t._v(" 下载解压后copy执行文件到path目录：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" xzvf syncthing-linux-amd64-v1.2.0.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" syncthing-linux-amd64-v1.18.1/syncthing /usr/local/bin\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/syncthing\n")])])]),n("p",[n("strong",[t._v("开放端口")])]),t._v(" "),n("p",[t._v("syncthing针对个人用户使用如下两个端口：")]),t._v(" "),n("ul",[n("li",[t._v("8384 是Web访问控制端口")]),t._v(" "),n("li",[t._v("22000 是节点访问端口")])]),t._v(" "),n("p",[t._v("附开启端口的教程帖子：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/wei9593/p/10419367.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/wei9593/p/10419367.html"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://wiki.archlinux.org/title/iptables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wiki.archlinux.org/title/iptables_(简体中文)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("启动syncthing")])]),t._v(" "),n("ol",[n("li",[t._v("直接启动（建议tmux下运行）syncthing。")]),t._v(" "),n("li",[t._v("当log出现"),n("code",[t._v("GUI and API listening on xxx 127.0.0.1:8384xxx")]),t._v("就可以直接ctrl c终止，目的是通过第一次运行程序来自动生成"),n("code",[t._v("~/.config/syncthing/config.xml")]),t._v("配置文件。")]),t._v(" "),n("li",[t._v("而一般我们需要让其他设备来访问服务器的web GUI，因此要将config.xml的127.0.0.1:8384改为0.0.0.0:8384。可执行"),n("code",[t._v("sed -i 's/127.0.0.1:8384/0.0.0.0:8384/g' ~/.config/syncthing/config.xml")]),t._v("，这里的8384也可以换为其他端口，以免和别人冲突。")]),t._v(" "),n("li",[t._v("重新运行syncthing，或者执行"),n("code",[t._v("nohup syncthing > /xxx/log文件保存路径位置.log 2>&1 &")]),t._v("到后台运行，终止的话（待补充）。")])]),t._v(" "),n("h3",{attrs:{id:"win-mac安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#win-mac安装"}},[t._v("#")]),t._v(" Win & Mac安装")]),t._v(" "),n("p",[t._v("去 "),n("a",{attrs:{href:"https://docs.syncthing.net/users/contrib.html#gui-wrappers",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.syncthing.net/users/contrib.html#gui-wrappers"),n("OutboundLink")],1),t._v(" 下载对应的图像界面程序"),n("code",[t._v("SyncTrayzor")]),t._v("或"),n("code",[t._v("syncthing-macos")]),t._v("，")]),t._v(" "),n("p",[t._v("安装后运行，会在状态栏有个图标")]),t._v(" "),n("p",[t._v("点击图标，有个open栏，点击就打开了本地的"),n("code",[t._v("127.0.0.1:8384")])]),t._v(" "),n("p",[t._v("打开web GUI后可以点操作→设置→图像用户界面→GUI监听地址/图形管理界面用户名密码，来修改地址和设定打开web GUI的登录验证（强烈建议打开登录验证）。")]),t._v(" "),n("h2",{attrs:{id:"使用示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),n("p",[t._v("打开web GUI后，可以选择先添加设备后设置共享文件夹，假设有一台远程linux服务器，本地为一台mac端个人电脑，并且本地可以ping通远程linux服务器（远程服务器不必ping通个人PC，因为远程Linux服务器可能为一级路由下的设备，个人PC为二级路由下的设备）")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162347822.png",alt:"https://img.idzc.top/picgoimg/202108162347822.png"}})]),t._v(" "),n("p",[t._v("设置实时同步流程：")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("打开个人PC的web GUI（一般为"),n("code",[t._v("127.0.0.1:8364")]),t._v("）。")])]),t._v(" "),n("li",[n("p",[t._v("添加远程设备，输入设备ID，并输入设备名称（一般为hostname，或者好记的名称），在高级选项里设置地址列表”"),n("code",[t._v("tcp://xxxxx:22000, dynamic")]),t._v("“，这里的ip换为远程服务器ip。保存设置。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162348361.png",alt:"点击右下角的"}})]),t._v(" "),n("p",[t._v("点击右下角的"),n("code",[t._v("添加远程设备")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162349590.png",alt:"输入设备ID和设备名，建议在高级选项卡里添加远程服务器的地址"}})]),t._v(" "),n("p",[t._v("输入设备ID和设备名，建议在高级选项卡里添加远程服务器的地址"),n("code",[t._v("tcp://xxxxx:22000, dynamic")])])]),t._v(" "),n("li",[n("p",[t._v("打开远程linux服务器的web GUI（一般为"),n("code",[t._v("远程ip:8364")]),t._v("），接受个人PC的连接请求。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162352417.png",alt:"点击添加设备"}})]),t._v(" "),n("p",[t._v("点击添加设备")])]),t._v(" "),n("li",[n("p",[t._v("再回到个人PC的web GUI，添加文件夹：输入文件夹标签（随意），文件夹ID（不能随意，所有同步的文件夹使用统一ID）,文件夹路径写个人PC上项目路径。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162353769.png",alt:"Untitled"}})])]),t._v(" "),n("li",[n("p",[t._v("点击共享选项卡，共享给刚才添加的远程设备：")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162354101.png",alt:"Untitled"}})])]),t._v(" "),n("li",[n("p",[t._v("在高级选项卡里设置扫描时间（即实时同步的间隔），文件夹类型设为”发送与接收“（即双向同步）点击保存即可")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://img.idzc.top/picgoimg/202108162354932.png",alt:"Untitled"}})])]),t._v(" "),n("li",[n("p",[t._v("回到远程服务器的web GUI，按照同样的方式添加文件夹，保存文件夹ID相同，其他设置随意")])]),t._v(" "),n("li",[n("p",[t._v("然后就可以实现设备间实时同步了。（为了保证远程服务器生成的大量日志或模型文件不被同步到本地，可以在文件夹选项里的忽略模式中添加忽略规则：如")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("output\ntmp\n**/*.pyc\n**/.DS_Store\n**/__pycache__\n**/.idea\n")])])])])]),t._v(" "),n("p",[t._v("注意：")]),t._v(" "),n("ul",[n("li",[t._v("有时远程服务器有多个用户同时使用syncthing来同步，需要每个用户修改远程服务器的监听端口，具体操作如下：web GUI→操作→设置→连接→"),n("code",[t._v("tcp://:22001(自定义端口)")])])]),t._v(" "),n("p",[t._v("参考：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/syncthing/syncthing",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/syncthing/syncthing"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.moewah.com/archives/1127.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.moewah.com/archives/1127.html"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/jackadam/p/8568833.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/jackadam/p/8568833.html"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=e.exports}}]);