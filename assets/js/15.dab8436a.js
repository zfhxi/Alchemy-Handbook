(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{294:function(a,s,t){"use strict";t.r(s);var e=t(10),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"linux-server使用clash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-server使用clash"}},[a._v("#")]),a._v(" linux server使用clash")]),a._v(" "),s("blockquote",[s("p",[a._v("注：以下方案适用的场景为：为某一 命令行 设置代理")])]),a._v(" "),s("h2",{attrs:{id:"安装proxychains4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装proxychains4"}},[a._v("#")]),a._v(" 安装ProxyChains4")]),a._v(" "),s("p",[a._v("先安装代理设置工具proxychains:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" proxychains4\n")])])]),s("p",[a._v("这样就可以为需要执行的命令行设定代理了，比如测试谷歌是否能访问：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" google.com               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 没有通过代理，通常无法正确获得结果")]),a._v("\nproxychains4 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" google.com  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过代理访问，可以获得正确返回结果")]),a._v("\n")])])]),s("p",[a._v("设置代理端口"),s("code",[a._v("sudo vim /etc/proxychains4.conf")]),a._v(":")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#socks4         127.0.0.1 9050")]),a._v("\nsocks5 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7890")]),a._v("\n")])])]),s("p",[a._v("注释socks4，添加socks5，并设定代理端口为7890")]),a._v(" "),s("h2",{attrs:{id:"安装clash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装clash"}},[a._v("#")]),a._v(" 安装clash")]),a._v(" "),s("p",[a._v("去"),s("a",{attrs:{href:"https://github.com/zhongfly/Clash-premium-backup/releases/tag/2023-09-05-gdcc8d87",target:"_blank",rel:"noopener noreferrer"}},[a._v("此处"),s("OutboundLink")],1),a._v("下载clash的linux版本（传到linux服务器上）:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("gunzip clash-linux-amd64-***.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" clash-linux-amd64-v1.14.0 your_path/clash\n")])])]),s("p",[a._v("运行clash需要Country.mmdb文件，依靠其利用GeoIP2服务能识别互联网用户的地点位置，以供规则分流时使用。去"),s("a",{attrs:{href:"https://github.com/Dreamacro/maxmind-geoip/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("此处"),s("OutboundLink")],1),a._v("下载。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" Country.mmdb your_path\n")])])]),s("p",[a._v("另外需要新建clash的配置文件"),s("code",[a._v("your_path/config.yaml")]),a._v("，由于官方避险删库了，这里提供一个模板：")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mixed-port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7890")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("allow-lan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" rule\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("log-level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" info\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("external-controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'0.0.0.0:9090'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("external-ui")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ui\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("secret")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'123456'")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 保留上面，在下面填写你的机场订阅地址下载得到的your_config.yaml内容，删除your_config.yaml中上面对应的项，并删除本行。")]),a._v("\n")])])]),s("p",[a._v("为了能保证外部web ui的访问，新建ui文件夹：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" your_path/ui\n")])])]),s("h2",{attrs:{id:"运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[a._v("#")]),a._v(" 运行")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("your_path/clash "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" your_path\n\nINFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("0000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Start initial compatible provider 故障转移       \nINFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("0000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Start initial compatible provider 自动选择       \nINFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("0000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Start initial compatible provider 节点选择       \nINFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("0000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Mixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("http+socks5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" proxy listening at: :7890 \nINFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("0000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" RESTful API listening at: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:9090 \n")])])]),s("p",[a._v("浏览器打开控制台地址：")]),a._v(" "),s("p",[s("a",{attrs:{href:"http://yacd.haishan.me/",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://yacd.haishan.me/"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("在控制台页面，点击 “配置” -> “切换后端”，填入地址：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("API Base URL：linux服务器ip:设定的端口9090\n密钥： 123456\n")])])]),s("p",[a._v("之后就可以通过控制台页面进行配置了，但要注意的是：控制台页面操作的结果并不会保存到配置文件，只能是临时生效。")]),a._v(" "),s("h2",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")]),a._v(" 测试")]),a._v(" "),s("p",[a._v("常用方式：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("proxychains4 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your_cmd"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 会有log信息")]),a._v("\nproxychains4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your_cmd"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 无log信息")]),a._v("\n")])])]),s("p",[a._v("假设需要克隆GitHub某个仓库的代码：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("proxychains4 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/xxx/xxx\n")])])]),s("p",[a._v("上述所需要下载的工具，我统一放在了"),s("a",{attrs:{href:"https://pan.idzc.top/99Public/OneDrive/Tools/clash_for_linux",target:"_blank",rel:"noopener noreferrer"}},[a._v("此处"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("参考："),s("br"),a._v("\nhttps://blog.iswiftai.com/posts/clash-linux/"),s("br"),a._v("\nhttps://skyao.io/learning-linux-mint/docs/daily/network/clash.html")])])}),[],!1,null,null,null);s.default=n.exports}}]);