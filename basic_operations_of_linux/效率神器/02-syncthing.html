<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多设备实时同步工具syncthing | 炼丹小本本</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.db5e3e28.css" as="style"><link rel="preload" href="/assets/js/app.ff9f4a7b.js" as="script"><link rel="preload" href="/assets/js/2.cfef0441.js" as="script"><link rel="preload" href="/assets/js/23.a6f26e8a.js" as="script"><link rel="preload" href="/assets/js/7.58b74439.js" as="script"><link rel="prefetch" href="/assets/js/10.438ffba0.js"><link rel="prefetch" href="/assets/js/11.4bab1ac6.js"><link rel="prefetch" href="/assets/js/12.2f4b41ac.js"><link rel="prefetch" href="/assets/js/13.0aeb395e.js"><link rel="prefetch" href="/assets/js/14.3a0b5387.js"><link rel="prefetch" href="/assets/js/15.dab8436a.js"><link rel="prefetch" href="/assets/js/16.835e25b2.js"><link rel="prefetch" href="/assets/js/17.efd9d216.js"><link rel="prefetch" href="/assets/js/18.d632e635.js"><link rel="prefetch" href="/assets/js/19.52991b17.js"><link rel="prefetch" href="/assets/js/20.da6bc2c8.js"><link rel="prefetch" href="/assets/js/21.56851f4a.js"><link rel="prefetch" href="/assets/js/22.e6e286a5.js"><link rel="prefetch" href="/assets/js/24.ad1ce351.js"><link rel="prefetch" href="/assets/js/25.1baa1fae.js"><link rel="prefetch" href="/assets/js/26.b14f5887.js"><link rel="prefetch" href="/assets/js/27.95c8a095.js"><link rel="prefetch" href="/assets/js/28.75ba33b0.js"><link rel="prefetch" href="/assets/js/29.40d726ce.js"><link rel="prefetch" href="/assets/js/3.f8bcfb9e.js"><link rel="prefetch" href="/assets/js/30.c618f274.js"><link rel="prefetch" href="/assets/js/31.078264ce.js"><link rel="prefetch" href="/assets/js/32.23e576c6.js"><link rel="prefetch" href="/assets/js/4.c95c1cfc.js"><link rel="prefetch" href="/assets/js/5.c2955b74.js"><link rel="prefetch" href="/assets/js/6.e34411cc.js"><link rel="prefetch" href="/assets/js/8.a52f8de6.js"><link rel="prefetch" href="/assets/js/9.ed221136.js">
    <link rel="stylesheet" href="/assets/css/0.styles.db5e3e28.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">炼丹小本本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Notes" class="dropdown-title"><span class="title">Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Notes" class="mobile-dropdown-title"><span class="title">Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic_operations_of_linux/index.html" class="nav-link">
  《Linux基操》
</a></li><li class="dropdown-item"><!----> <a href="/programming_magic/index.html" class="nav-link">
  《编程奇技淫巧》
</a></li></ul></div></div> <a href="https://github.com/zfhxi/Alchemy-Handbook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Notes" class="dropdown-title"><span class="title">Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Notes" class="mobile-dropdown-title"><span class="title">Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic_operations_of_linux/index.html" class="nav-link">
  《Linux基操》
</a></li><li class="dropdown-item"><!----> <a href="/programming_magic/index.html" class="nav-link">
  《编程奇技淫巧》
</a></li></ul></div></div> <a href="https://github.com/zfhxi/Alchemy-Handbook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/basic_operations_of_linux/" aria-current="page" class="sidebar-link">《Linux基操》</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度学习环境配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux系统配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>效率神器</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic_operations_of_linux/效率神器/01-tmux.html" class="sidebar-link">tmux使用简记</a></li><li><a href="/basic_operations_of_linux/效率神器/02-syncthing.html" class="active sidebar-link">多设备实时同步工具syncthing</a></li><li><a href="/basic_operations_of_linux/效率神器/03-ssh_key_pair.html" class="sidebar-link">Linux配置ssh密钥对实现免密登录</a></li><li><a href="/basic_operations_of_linux/效率神器/04-file_transfer_between_pc_and_server.html" class="sidebar-link">PC和服务器间进行文件传输</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shell零碎脚本</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="多设备实时同步工具syncthing"><a href="#多设备实时同步工具syncthing" class="header-anchor">#</a> 多设备实时同步工具syncthing</h1> <blockquote><p>Syncthing 是一个开源免费的数据同步神器，被称为 Resilio Sync 的替代品，支持 Android、Linux、Windows、Mac OS X 等系统，可以使我们在 2 台任何系统任何设备之间，实现文件实时同步，很强大。而且数据很安全，不会存储在你的设备以外的其他地方。所有通信都使用 TLS 进行保护。所使用的加密包括完美的前向保密，以防止窃听者获得对您的数据的访问权限。很适合我们用来搭建私有同步网盘。</p></blockquote> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <h3 id="linux平台上安装"><a href="#linux平台上安装" class="header-anchor">#</a> Linux平台上安装</h3> <p><strong>下载安装</strong></p> <blockquote><p>注：建议通过which syncthing命令查看服务器是否安装了，避免重复安装。</p></blockquote> <p>在<a href="https://github.com/syncthing/syncthing/releases/" target="_blank" rel="noopener noreferrer">https://github.com/syncthing/syncthing/releases/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 找linux amd64版，如<a href="https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 下载解压后copy执行文件到path目录：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/syncthing/syncthing/releases/download/v1.18.1/syncthing-linux-amd64-v1.18.1.tar.gz
<span class="token function">tar</span> xzvf syncthing-linux-amd64-v1.2.0.tar.gz
<span class="token function">sudo</span> <span class="token function">cp</span> syncthing-linux-amd64-v1.18.1/syncthing /usr/local/bin
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/syncthing
</code></pre></div><p><strong>开放端口</strong></p> <p>syncthing针对个人用户使用如下两个端口：</p> <ul><li>8384 是Web访问控制端口</li> <li>22000 是节点访问端口</li></ul> <p>附开启端口的教程帖子：</p> <p><a href="https://www.cnblogs.com/wei9593/p/10419367.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/wei9593/p/10419367.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://wiki.archlinux.org/title/iptables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener noreferrer">https://wiki.archlinux.org/title/iptables_(简体中文)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>启动syncthing</strong></p> <ol><li>直接启动（建议tmux下运行）syncthing。</li> <li>当log出现<code>GUI and API listening on xxx 127.0.0.1:8384xxx</code>就可以直接ctrl c终止，目的是通过第一次运行程序来自动生成<code>~/.config/syncthing/config.xml</code>配置文件。</li> <li>而一般我们需要让其他设备来访问服务器的web GUI，因此要将config.xml的127.0.0.1:8384改为0.0.0.0:8384。可执行<code>sed -i 's/127.0.0.1:8384/0.0.0.0:8384/g' ~/.config/syncthing/config.xml</code>，这里的8384也可以换为其他端口，以免和别人冲突。</li> <li>重新运行syncthing，或者执行<code>nohup syncthing &gt; /xxx/log文件保存路径位置.log 2&gt;&amp;1 &amp;</code>到后台运行，终止的话（待补充）。</li></ol> <h3 id="win-mac安装"><a href="#win-mac安装" class="header-anchor">#</a> Win &amp; Mac安装</h3> <p>去 <a href="https://docs.syncthing.net/users/contrib.html#gui-wrappers" target="_blank" rel="noopener noreferrer">https://docs.syncthing.net/users/contrib.html#gui-wrappers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 下载对应的图像界面程序<code>SyncTrayzor</code>或<code>syncthing-macos</code>，</p> <p>安装后运行，会在状态栏有个图标</p> <p>点击图标，有个open栏，点击就打开了本地的<code>127.0.0.1:8384</code></p> <p>打开web GUI后可以点操作→设置→图像用户界面→GUI监听地址/图形管理界面用户名密码，来修改地址和设定打开web GUI的登录验证（强烈建议打开登录验证）。</p> <h2 id="使用示例"><a href="#使用示例" class="header-anchor">#</a> 使用示例</h2> <p>打开web GUI后，可以选择先添加设备后设置共享文件夹，假设有一台远程linux服务器，本地为一台mac端个人电脑，并且本地可以ping通远程linux服务器（远程服务器不必ping通个人PC，因为远程Linux服务器可能为一级路由下的设备，个人PC为二级路由下的设备）</p> <p><img src="https://img.idzc.top/picgoimg/202108162347822.png" alt="https://img.idzc.top/picgoimg/202108162347822.png"></p> <p>设置实时同步流程：</p> <ol><li><p>打开个人PC的web GUI（一般为<code>127.0.0.1:8364</code>）。</p></li> <li><p>添加远程设备，输入设备ID，并输入设备名称（一般为hostname，或者好记的名称），在高级选项里设置地址列表”<code>tcp://xxxxx:22000, dynamic</code>“，这里的ip换为远程服务器ip。保存设置。</p> <p><img src="https://img.idzc.top/picgoimg/202108162348361.png" alt="点击右下角的"></p> <p>点击右下角的<code>添加远程设备</code></p> <p><img src="https://img.idzc.top/picgoimg/202108162349590.png" alt="输入设备ID和设备名，建议在高级选项卡里添加远程服务器的地址"></p> <p>输入设备ID和设备名，建议在高级选项卡里添加远程服务器的地址<code>tcp://xxxxx:22000, dynamic</code></p></li> <li><p>打开远程linux服务器的web GUI（一般为<code>远程ip:8364</code>），接受个人PC的连接请求。</p> <p><img src="https://img.idzc.top/picgoimg/202108162352417.png" alt="点击添加设备"></p> <p>点击添加设备</p></li> <li><p>再回到个人PC的web GUI，添加文件夹：输入文件夹标签（随意），文件夹ID（不能随意，所有同步的文件夹使用统一ID）,文件夹路径写个人PC上项目路径。</p> <p><img src="https://img.idzc.top/picgoimg/202108162353769.png" alt="Untitled"></p></li> <li><p>点击共享选项卡，共享给刚才添加的远程设备：</p> <p><img src="https://img.idzc.top/picgoimg/202108162354101.png" alt="Untitled"></p></li> <li><p>在高级选项卡里设置扫描时间（即实时同步的间隔），文件夹类型设为”发送与接收“（即双向同步）点击保存即可</p> <p><img src="https://img.idzc.top/picgoimg/202108162354932.png" alt="Untitled"></p></li> <li><p>回到远程服务器的web GUI，按照同样的方式添加文件夹，保存文件夹ID相同，其他设置随意</p></li> <li><p>然后就可以实现设备间实时同步了。（为了保证远程服务器生成的大量日志或模型文件不被同步到本地，可以在文件夹选项里的忽略模式中添加忽略规则：如</p> <div class="language- extra-class"><pre class="language-text"><code>output
tmp
**/*.pyc
**/.DS_Store
**/__pycache__
**/.idea
</code></pre></div></li></ol> <p>注意：</p> <ul><li>有时远程服务器有多个用户同时使用syncthing来同步，需要每个用户修改远程服务器的监听端口，具体操作如下：web GUI→操作→设置→连接→<code>tcp://:22001(自定义端口)</code></li></ul> <p>参考：</p> <p><a href="https://github.com/syncthing/syncthing" target="_blank" rel="noopener noreferrer">https://github.com/syncthing/syncthing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.moewah.com/archives/1127.html" target="_blank" rel="noopener noreferrer">https://www.moewah.com/archives/1127.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/jackadam/p/8568833.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/jackadam/p/8568833.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zfhxi/Alchemy-Handbook/edit/main/docs/basic_operations_of_linux/效率神器/02-syncthing.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div id="vcomments"></div> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ff9f4a7b.js" defer></script><script src="/assets/js/2.cfef0441.js" defer></script><script src="/assets/js/23.a6f26e8a.js" defer></script><script src="/assets/js/7.58b74439.js" defer></script>
  </body>
</html>
